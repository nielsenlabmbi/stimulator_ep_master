% canonicalIds = [2 20 14 8 80 98 92 86 26 104 25 103];

function selectedIds = v4_3d_getFineIds(id)
    allNorm = getNorm();
    
    nn = allNorm(id,:);
%     tt = allTang(id512,:);
%     tto = allTangOpp(id512,:);

    aa = sqrt(sum((allNorm - repmat(nn,104,1)).^2,2));
    selectedIds = find(aa<0.9);
    if length(selectedIds) > 20
        selectedIds = selectedIds((sum(allNorm(selectedIds,:) == 0,2) ~= 0));
    end
    selectedIds = selectedIds';
%     for ii=1:20
%         line([0 allNorm(selectedIds(ii),1)],[0 allNorm(selectedIds(ii),2)],[0 allNorm(selectedIds(ii),3)]);
%         hold on;
%     end
%     axis equal; grid on; view(0,90);
%     
%     figure
%     for ii=1:length(selectedIds)
%         subplot(4,length(selectedIds)/4,ii);
%         im = imread(['/Users/ecpc32/Desktop/mtab6/main/c/img/c_SHADE_' num2str(selectedIds(ii)) '.png']);
%         imshow(im);
%     end
end

function allNorm = getNorm()
    allNorm = [0,0.707106769084930,0.707106828689575;0,1,0;0,0.707106769084930,-0.707106769084930;0.499999910593033,0.499999880790710,0.707107007503510;0.707106769084930,0.707106769084930,0;0.499999761581421,0.500000059604645,-0.707107007503510;0.707106769084930,0,0.707106828689575;1,0,0;0.707106769084930,0,-0.707106769084930;0.499999880790710,-0.499999910593033,0.707107007503510;0.707106769084930,-0.707106769084930,0;0.500000059604645,-0.499999761581421,-0.707107007503510;0,-0.707106769084930,0.707106828689575;0,-1,0;0,-0.707106769084930,-0.707106769084930;-0.499999910593033,-0.499999880790710,0.707107007503510;-0.707106769084930,-0.707106769084930,0;-0.499999761581421,-0.500000059604645,-0.707107007503510;-0.707106769084930,0,0.707106828689575;-1,0,0;-0.707106769084930,0,-0.707106769084930;-0.499999880790710,0.499999910593033,0.707107007503510;-0.707106769084930,0.707106769084930,0;-0.500000059604645,0.499999761581421,-0.707107007503510;0,0,-1;0,0,1;0,0.707106709480286,0.707106828689575;0,0.999999940395355,0;0,0.707107305526733,-0.707106292247772;0.500000000000000,0.500000000000000,0.707106769084930;0.707106769084930,0.707106769084930,0;0.500000238418579,0.500000655651093,-0.707106232643127;0.707106709480286,0,0.707106828689575;0.999999940395355,0,0;0.707107305526733,0,-0.707106292247772;0.500000000000000,-0.500000000000000,0.707106769084930;0.707106769084930,-0.707106769084930,0;0.500000655651093,-0.500000238418579,-0.707106232643127;0,-0.707106709480286,0.707106828689575;0,-0.999999940395355,0;0,-0.707107305526733,-0.707106292247772;-0.500000000000000,-0.500000000000000,0.707106769084930;-0.707106769084930,-0.707106769084930,0;-0.500000238418579,-0.500000655651093,-0.707106232643127;-0.707106709480286,0,0.707106828689575;-0.999999940395355,0,0;-0.707107305526733,0,-0.707106292247772;-0.500000000000000,0.500000000000000,0.707106769084930;-0.707106769084930,0.707106769084930,0;-0.500000655651093,0.500000238418579,-0.707106232643127;0,0,-0.999999940395355;0,0,1;0,0.707106709480286,0.707106828689575;0,1,0;0,0.707106769084930,-0.707106828689575;0.499999880790710,0.500000238418579,0.707106649875641;0.707106769084930,0.707106769084930,0;0.500000178813934,0.499999880790710,-0.707106709480286;0.707106709480286,0,0.707106828689575;1,0,0;0.707106769084930,0,-0.707106828689575;0.500000238418579,-0.499999880790710,0.707106649875641;0.707106769084930,-0.707106769084930,0;0.499999880790710,-0.500000178813934,-0.707106709480286;0,-0.707106709480286,0.707106828689575;0,-1,0;0,-0.707106769084930,-0.707106828689575;-0.499999880790710,-0.500000238418579,0.707106649875641;-0.707106769084930,-0.707106769084930,0;-0.500000178813934,-0.499999880790710,-0.707106709480286;-0.707106709480286,0,0.707106828689575;-1,0,0;-0.707106769084930,0,-0.707106828689575;-0.500000238418579,0.499999880790710,0.707106649875641;-0.707106769084930,0.707106769084930,0;-0.499999880790710,0.500000178813934,-0.707106709480286;0,0,-0.999999940395355;0,0,1;0,0.707106769084930,0.707106769084930;0,0.999999940395355,0;0,0.707106709480286,-0.707106828689575;0.500000059604645,0.500000000000000,0.707106828689575;0.707106769084930,0.707106769084930,0;0.499999970197678,0.500000000000000,-0.707106828689575;0.707106769084930,0,0.707106769084930;0.999999940395355,0,0;0.707106709480286,0,-0.707106828689575;0.500000000000000,-0.500000059604645,0.707106828689575;0.707106769084930,-0.707106769084930,0;0.500000000000000,-0.499999970197678,-0.707106828689575;0,-0.707106769084930,0.707106769084930;0,-0.999999940395355,0;0,-0.707106709480286,-0.707106828689575;-0.500000059604645,-0.500000000000000,0.707106828689575;-0.707106769084930,-0.707106769084930,0;-0.499999970197678,-0.500000000000000,-0.707106828689575;-0.707106769084930,0,0.707106769084930;-0.999999940395355,0,0;-0.707106709480286,0,-0.707106828689575;-0.500000000000000,0.500000059604645,0.707106828689575;-0.707106769084930,0.707106769084930,0;-0.500000000000000,0.499999970197678,-0.707106828689575;0,0,-1;0,0,1];
end